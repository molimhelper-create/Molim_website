<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>اطلب الجهاز - نموذج</title>
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;direction:rtl;padding:2rem}
      .container{max-width:680px;margin:0 auto}
      label{display:block;margin:0.5rem 0 0.25rem}
      input,textarea,button{width:100%;padding:0.75rem;border:1px solid #ddd;border-radius:8px}
      button{background:#0B1E3A;color:#fff;border:none;margin-top:1rem}
    </style>
  </head>
  <body>
    <div class="container">
      <h1>اطلب الجهاز</h1>
      <p>يمكنك إرسال طلبك مباشرة من هنا. سيتم استلام الإشعار في لوحة Netlify Forms إذا فعلت forms notifications.</p>

      <!-- Netlify will detect this form at deploy time -->
      <form name="send-order" method="POST" data-netlify="true" netlify-honeypot="bot-field">
        <input type="hidden" name="form-name" value="send-order" />
        <p style="display:none">
          <label>لا تعبئ هذا الحقل<input name="bot-field" /></label>
        </p>

        <label for="customerEmail">البريد الإلكتروني</label>
        <input id="customerEmail" name="customerEmail" type="email" required />

  <label for="itemIds">معرفات العناصر (مفصولة بفواصل أو سطر لكل معرف)</label>
  <textarea id="itemIds" name="itemIds" rows="4" placeholder="مثال: base-device, addon-ir-thermometer" required></textarea>
  <input type="hidden" id="itemIds_readable" name="itemIds_readable" />

        <label for="notes">ملاحظات إضافية (اختياري)</label>
        <textarea id="notes" name="notes" rows="3" placeholder="ملاحظات حول الطلب"></textarea>

        <button type="submit">إرسال الطلب</button>
      </form>

      <script>
        // Ensure itemIds_readable is populated as a comma-separated string on submit
        (function(){
          var form = document.querySelector('form[name="send-order"]');
          if (!form) return;
          form.addEventListener('submit', function(){
            var ta = document.getElementById('itemIds');
            var out = document.getElementById('itemIds_readable');
            if (!ta || !out) return;
            // Convert newlines to commas and normalize spacing
            var v = ta.value.split(/\r?\n/).map(function(s){ return s.trim(); }).filter(Boolean).join(', ');
            out.value = v;
          });
        })();
      </script>

      <p style="margin-top:1rem;color:#666">ملاحظة: هذه طريقة Netlify-Only بدون أي كود خادمي أو جافاسكربت إضافي. بعد النشر انسخ الطلبات من Dashboard → Forms.</p>
    </div>
  </body>
</html>
